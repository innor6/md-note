# 3D弹幕游戏

1. 亡我乡【自尽】：激光？sin弹？
2. 二非，开扇：
   1. 随机小粉弹
   2. 光玉：六角形分布，1+6*6，自机狙，0.5秒/发（还是根据音乐？）
   3. 随机直线发射类的红弹？
3. 生者必灭之理-魔境-
   1. 蝴蝶三悬臂：
   2. 光玉：从9点方向逆时针发射，24个/圈，16秒/圈；1/4圈后狙击。
4. 埋骨于弘川-神灵-
   1. 五环蝴蝶：
      - 球形绕Z轴旋转（每个环有两圈，低速度相反方向旋转）
      - 高速发射后减速
   2. 延迟后的跟踪蝴蝶
      - 0.5s一次，连续四次，然后发射五环
5. 3. 
6. 复活
   1. 球状蝴蝶*5
   2. 球状光玉*3
   3. 激光
   4. 



四元数：

绕i轴转2*60°

cos(60)+sin(60)(1.0i + 0j + 0k); 

0.5 + 0.87i +0j +0k



WBS：

- 界面设计
- 场景设计
- 摄像机设计
- 角色类设计
  - 角色设计
  - 操作设计
- 敌机类设计
  - 角色设计
  - 弹幕生成
- 子弹类设计
  - 子弹外形
  - 运动模式



- 输入检测
- 碰撞检测









界面设计（流程）：

- 载入界面
  - 选项（无敌模式）
- 游戏界面
  - 剧情动画
  - 人物对话（optional）
  - 正式操作部分（Essential）
- 结算界面



场景设计

- 地理环境
- 天空球
- 光照



sprite：

- 自机
  - 角色模型设计
  - 自机操作（WASD、低速移动）
  - 生命系统
  - （optional）消弹技能
  - （optional）围绕角色旋转的阴阳玉、例子
  - （optional）森罗结界
- 敌机
  - 角色模型设计
  - 弹幕设计
    - 各个阶段
    - 弹幕样式
- 子弹
  - 子弹的容器类设计（管理子弹）
    - 更新子弹信息
    - 渲染子弹
    - 生成/激活/销毁子弹
  - 子弹类设计
    - 基本参数：坐标、方向
    - 生命周期、阶段数
    - 激活/销毁
  - 外貌样式
    - 球形、方形、箭头、线形、复杂几何（如蝴蝶）
  - 运动模式（同一子弹在生命期的不同阶段可以有不同运动模式）
    - 计算子弹在下一时刻的参数
    - 某些情况下可能会生成其他子弹，加入到子弹容器类中
- 摄像机
  - 跟随角色
  - optional：跟踪方式的细节优化，如延迟追踪？



逻辑设计：

- 画面渲染（OpenGL）
  - 更新sprite的数据
  - 绘制
- 弹幕生成
  - 敌机在不同阶段，在正确的时机，生成正确的弹幕
    - 设定子弹基本参数
- 弹幕运动
  - 运动路线
    - 直线、曲线
  - 固定弹、狙击
- 游戏阶段的切换
  - 非符、符卡
  - 
- 输入检测
  - 角色移动-摄像机移动
  - 界面切换等其他操作
- 碰撞检测（交给角色做还是子弹做？）
  - 角色暴毙
    - 角色生命
    - 无敌状态
  - 子弹消除
  - 八叉树优化



音效：

- 背景音乐
- 弹幕音效
- 角色miss音效





## 风险管理

标识风险

预测风险

参考水准（三元组）

风险计划书

