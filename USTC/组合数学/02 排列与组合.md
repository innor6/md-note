# 2 排列与组合

加法原理：将集合S划分为两两不相交的部分（划分为少量容易处理的部分），则有
$$
|S|=|S_1|+|S_2|+ \dots +|S_m|
$$
乘法原理：S是有序对（a，b）的集合，a、b分别有p、q种选择，b的选择数目不依赖于a的选择（指b的q种选择可以随着a的选择而变化，但是选择的数目q必须是不变的）（**先确定约束性强的选择的选择数目**），则
$$
|S|=p\times q
$$
减法原理：A是一个集合，U是包含A的更大的集合，有：
$$
|A|=|U|-|\bar{A}|
$$
除法原理：鸽巢原理？



集合：所有元素不相同。

多重集合：集合内允许有相同的元素，相同元素出现的次数称为重复数，可以为无穷大。

排列：对象的有序排列。

组合：对象的无序排列。

占位法：乘法原理。



### 排列

P(n, r)：n个元素集合的r排列的数目。
$$
\begin{align}
P(n,r) &= n \times (n-1) \times \dots \times (n-r+1) \\
&= \frac{n!}{(n-r)!}
\end{align}
$$

- 本质上是乘法原理
- 约定 0! = 1
- r > n 时，P(n, r) = 0。
- S的排列：n个元素的n排列，全排列，即 n！。

**插空法**：从n个元素中选择r个，放到r个位置里，有P(n, r)种方法。

弄清元素和位置：将数字1~15分配到6*6方格中，有几种放法？——把36个方格作为<u>元素</u>，把1~15作为<u>位置</u>，因此计算的是P(36, 15)。

循环排列：

n个元素集合的循环r排列的数目为 P(n, r) / r 。

另一种分析方法：先把某个元素放到固定位置（桌头），然后考虑剩下位置的线性排列。



### 组合（子集）

r子集：从n个元素中选取r个元素的一个无序选择。
$$
\begin{pmatrix} n\\r \end{pmatrix} 
= \frac{P(n,r)}{r!}
= \frac{n!}{r!(n-r)!}
$$

- 0 ≤ r ≤ n
- 约定（0 // 0）= 1

**对称性**：
$$
\begin{pmatrix} n\\r \end{pmatrix}  = \begin{pmatrix} n\\n-r \end{pmatrix}
$$
**帕斯卡公式**：（1 ≤ k ≤ n-1）
$$
\begin{pmatrix} n\\k \end{pmatrix}  = \begin{pmatrix} n-1\\k \end{pmatrix} + \begin{pmatrix} n-1\\k-1 \end{pmatrix}
$$
加法原理，+左侧是去掉某个元素后，从剩下n-1中取k子集；+右侧是从剩下n-1中取k-1子集，再加上去掉的元素。两者之和为n元素的k子集。

**n元素集合的所有子集的数目**：（n≥0）
$$
\begin{pmatrix} n\\0 \end{pmatrix} + \begin{pmatrix} n\\1 \end{pmatrix} + \begin{pmatrix} n\\2 \end{pmatrix} + \dots + \begin{pmatrix} n\\n \end{pmatrix} = 2^n
$$
等式右侧的意思是，对于n个元素，每个元素都有“取”或“不取”两种选择。



### 多重集合的排列

无限重复数：多重集合S，有k种元素，每种元素都有无限重复数。

——那么 S 的 r 排列是 k^r。（证明：每个位置都有k种选择。其实只要“重复数＞r”即可。）

**有限重复数**：多重集合S，有k种元素，每种元素的重复数分别为n1，n2，...，nk，且满足n1+n2+...+nk = n。

——则 S 的 n 排列数目等于：
$$
\frac{n!}{n_1!n_2!\dots n_k!}
$$
（证明：先从n个位置中选n1个子集，再从n-n1个位置中选n2子集，...，应用乘法原理即可得证）

**另一种理解——分组问题**：

把集合S的n个元素划分为k个组，放入到k个标有标签的盒子中，每个盒子分别放n1，n2，...，nk个元素，且满足n1+n2+...+nk = n。

——则划分方法的数目同上；如果盒子没有标签，因为标签有k!种贴法，因此要再除以 k!。

**注意**：这里只给出了求S的n排列的公式，而当 r < n 时，只能用生成函数技术求解。



### 多重集合的组合

无限重复数：多重集合S，有k种元素，每种元素都有无限重复数。

——则 S 的 r 组合的数目等于
$$
\begin{pmatrix} r+k-1\\r \end{pmatrix}  = \begin{pmatrix} r+k-1\\k-1 \end{pmatrix}
$$
证明：设S的r组合中每个元素的重复数为x1，x2，...，xk，则必定满足 x1+x2+...+xk = r。转换为

**等价问题（★）**

求方程
$$
x_1+x_2+\dots+x_k=n非负整数解的个数
$$
非负整数解的个数。

- 在r个“1”之间切k-1刀，划分为k个部分。
- 等价于多重集合T = { r * 1，(k-1) * 空格}的排列数，得上面的公式。

**推论**：（限定下界的xi）
$$
\begin{align}
&有方程: \\&x_1 + x_2 + x_3 + x_4 = 20，\\
&限制：\\&x_1 ≥ 3，x_2 ≥ 1，x_3 ≥ 0，x_4 ≥ 5；\\
&变量代换：\\&y_1 = x_1 - 3，y_2 = x_2 - 1，y_3 = x_3，y_4 = x_4 - 5；\\
&得到新方程：\\&y_1 + y_2 + y_3 + y_4 = 11，\\
&求它的非负整数解的个数。
\end{align}
$$
说明：此方法只适用于有下界限制的情况，如果有上界的限制，用容斥原理。

