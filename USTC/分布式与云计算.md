分布式

RPC语义

TCP信息发送后，如果发送失败，客户端无法区分消息丢失的原因：是发送链路上网络故障？服务器故障？接受链路网络故障？

**重复提交问题**

at least once：适合等幂操作 ，即允许重复提交，如只读操作

at most once：非等幂操作，客户每次请求使用唯一的XID，服务器对于已接收到过的XID，不做处理，而是返回之前的旧回复。

- 如何保证唯一XID？
  - 每个客户一个唯一ID（大随机整数）
  - 每个客户RPC使用序列号
- 服务器何时丢弃旧的回复值
  - 使用seq和ack
  - 服务器收到序列号seq+1后，丢弃所有<=seq的回复
- 服务器崩溃重启？

