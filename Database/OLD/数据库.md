# 数据库系统概述

- 数据库（Database）：长期储存在计算机内、有组织的、可共享的大量数据的集合。
- 数据库管理系统（DBMS）：位于用户与操作系统之间的一层数据管理软件。负责数据的定义、操纵、组织、存储、管理和维护等。
- 数据库系统（Database System）：是由数据库、数据库管理系统（及其应用开发工具）、应用程序、数据库管理员，组成的存储、管理、处理和维护数据的系统。

![](C:\Users\64589\Documents\Tepora\Database\DBS.PNG)



### 数据库系统的特点

- 数据整体结构化
- 数据的共享性高，冗余度低且易扩充
- 数据独立性高（物理存储-逻辑数据库-应用程序）
- 数据由数据库管理系统统一管理和控制



# 数据模型

数据模型是对现实世界数据特征的抽象。

数据模型应满足三方面要求：

- 能比较真实地模拟现实世界
- 容易为人所理解
- 便于在计算机上实现

数据模型是数据库系统的核心和基础。

两个层次：

- 概念模型：信息的抽象
- 存储模型：逻辑关系-物理存储（DBMS负责）

### 描述信息：概念模型

基本概念：实体、属性、码、实体类型、实体集合、联系（1:1、1:n、m:n）

##### 实体-联系方法

Entity-Relationship Approach，用E-R图来描述现实世界的概念模型。

实体（矩形）、属性（椭圆）、联系（菱形、无向边）

### 逻辑存储：数据模型

##### 数据模型的三要素

- 数据结构
- 数据操作
- 数据的完整性约束条件

##### 常用数据模型

- 层次模型（Hierarchical Model）
- 网状模型（Network Model）
- 关系模型（Relational Model)）
- 面向对象数据模型（Object Oriented Data Model）
- 对象关系数据模型（Object Relational Data Model）
- 半结构化数据模型（Semistruture Data Model）

##### 层次模型

用树来实现，能直接处理一对多的实体联系。

表示多对多的联系，需要先分解为一对多的联系，使用冗余结点法和虚拟结点法。

##### 关系模型

在用户观点下，关系模型中数据的逻辑结构是一张二维表，它由行和列组成。

- 关系（表）、元组（tuple，一行）、属性（attribute，一列）、主码（key）
- 域：相同数据类型的值的集合，如属性的取值来自一个域
- 分量：元组中的一个属性值
- 关系模式：对关系的描述，

关系的每一个分量必须是一个不可分的数据项, 不允许表中还有表。



# 数据库系统的结构

##### 三级模式结构

（开发人员角度）

内模式-模式-外模式：对应于物理存储-全局逻辑数据-应用程序

三级模式构成了两层映像系统。

![](C:\Users\64589\Documents\Tepora\Database\schema.png)



# 关系数据库

现实世界的联系在关系模型中以**二维表**的逻辑结构表示。

域（Domain）：一组相同数据类型的值的集合。

元组（Tuple）：一组域中，每个域取一个值，构成元组。

笛卡尔积（Cartesian Product）：n个域的笛卡尔积，为一个n元组所有可能取值的集合。
$$
D_1\times D_2\times \cdots \times D_n=\{\ (d_1,d_2,\cdots,d_n ) \mid d_i\in D_i,i=1,2,\cdots,n\ \}
$$
分量（Component）：笛卡尔积元素中的每一个值di，分量必须为原子值，不能再有小表。

基数（Cardinal number）：笛卡尔积的基数为每个域的基数的乘积。

关系（Relation）：笛卡尔积的子集。二维表中的列被称为属性。

候选码（Candidate key）：关系中的某一属性组的值能唯一地标识一个元组。

##### 关系模式的表示

R (U, D, DOM, F)

关系名（属性名的集合，域，属性到域的映射，属性间数据依赖关系）

##### 关系操作

查询操作：选择、投影、~~连接、除~~、并、差、~~交~~、笛卡尔积

数据更新：插入、删除、修改

特点：操作的对象和结果都是集合

结构化查询语言：SQL（Structured Query Language）关系代数和关系演算双重特点的语言

##### 关系的完整性

实体完整性：主码即主属性可以唯一标识一个元组。

参照完整性：关系R的外码F可以映射到另一关系S的主码上，从而正确引用。

用户定义的完整性

##### 关系代数

一种抽象的查询语言，运算对象和结构都是关系。

- 集合运算：并（Union）、差（Difference）、交（Intersection）、笛卡尔积
- 专门的关系运算：选择σ（行运算）、投影π（列运算）、连接（行运算）、除

##### 连接

将两个关系组合，从而扩充列表，通常是根据两个关系中元组所共有的属性是否相等进行连接。

##### 除

两个关系R (X, Y)和S (Y, Z)，有共同的属性Y，R÷S后，R中的Y属性被除去，且只保留满足条件的元组：这个元组的X分量对应的所有Y值包含了所有S中的Y值。

示例：求选修了全部课程的学生学号：
$$
\pi_{学号，课程号}(选课)\div课程
$$
自动在“课程”中找到关系R中的“课程号”属性，并返回R中包含了所有S中“课程号”的主值“学号”。即语义为查找“全部包含这些值”的元组。



# 关系演算

不是所有都==存在一个不

或者，所有都==不存在一个不

##### 元组关系演算

元组演算表达式{ t | φ(t) }表示使φ(t)为真的元组t的集合，其中t为元组变量，φ(t)为与t有关的公式。

交：R(t) and S(t)

并：R(t) or S(t)

差：R(t) and not S(t)

选择：R(t) and C’