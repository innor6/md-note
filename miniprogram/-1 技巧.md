##### this丢失

js函数中，有时会有多层的函数调用（request的嵌套），可能会导致this的丢失。

可以在函数的开始用一变量`_self = this;`保存this，在后续的调用中使用`_self`代替`this`。



##### onLoad

跳转到该页面时触发，有时会传入参数，可用一个全局变量保存该数据，以便其他函数使用。

##### onShow

每次显示页面时触发，可用于刷新页面数据（如清空、重置数据，再次请求等）



##### 骨架屏(不完整)

data中有一个`skeleton : 'ing'`，

每个组件的class检查`skeleton=='ing'?'skeletonClass':''`

onload中加载完毕，把this.skeleton置为'end'。

##### 图片预览

http://www.hcoder.net/tutorials/info_1386.html



##### 组件自定义属性

:data-xxx=zzz，

组件触发函数后，可从`e.currentTarget.dataset.xxx`中获取它的值zzz，多用于列表渲染。



##### C/S交互规范

1. 客户端提交时带上sign、uid、random码

2. 服务器每次先验证签名、检查用户合法性（sign、uid、random码）
   服务器返回数据中包含一个状态属性：如status=ok 表示正常返回

3. 客户端每次都要查看status，来确认返回类型。



##### JSON与String的转换

```
str = JSON.stringify(obj)
res = JSON.parse(res.data);
```

上传的data中如果有嵌套对象，使用aaa = JSON.stringfy(this.xxx)转化后，可以很方便的存入数据库，下次取回时，aaa = JSON.parse(xxx)即可复原



##### POST说明

最终发送给服务器的数据是 String 类型，如果传入的 data 不是 String 类型，会被转换成 String。转换规则如下：

- 对于 `GET` 方法，会将数据转换为 query string。例如 `{ name: 'name', age: 18 }` 转换后的结果是 `name=name&age=18`。

- 对于 `POST` 方法且 `header['content-type']` 为 `application/json` 的数据，会进行 JSON 序列化。

- 对于 `POST` 方法且 `header['content-type']` 为 `application/x-www-form-urlencoded` 的数据，会将数据转换为 query string。（表单格式传输）

  ```
  header: {'content-type' : "application/x-www-form-urlencoded"},
  ```

  

